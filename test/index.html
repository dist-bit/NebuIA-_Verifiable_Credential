<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>NebuIA Verifiable Credential</title>

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
        integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous" />

    <!-- Include Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>

    <script type="text/javascript" src="https://unpkg.com/web3modal"></script>
    <script type="text/javascript" src="//unpkg.com/@walletconnect/web3-provider"></script>
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js" type="application/javascript"></script>
    <script type="text/javascript" src="https://unpkg.com/fortmatic@2.0.6/dist/fortmatic.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jdenticon@3.2.0/dist/jdenticon.min.js" async
        integrity="sha384-yBhgDqxM50qJV5JPdayci8wCfooqvhFYbIKhv0hTtLvfeeyJMJCscRfFNKIxt43M" crossorigin="anonymous">
        </script>
    <script src="https://cdn.jsdelivr.net/npm/qr-creator/dist/qr-creator.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        clifford: "#da373d",
                    },
                },
            },
        };
    </script>
</head>

<style>
    @keyframes spin {
        to {
            transform: rotate(360deg);
        }
    }
</style>

<body class="p-4">

    <div x-data="{ address: '', credentials: [], showDetails: false, credential: null }">


        <!-- Modal -->
        <div x-show="showDetails" class="relative z-10" aria-labelledby="modal-title" role="dialog" aria-modal="true">

            <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

            <div class="fixed inset-0 z-10 overflow-y-auto">
                <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">

                    <div
                        class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6">
                        <div>
                            <div class="mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                                    stroke-width="1.5" stroke="currentColor" class="h-6 w-6 text-green-600">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
                                </svg>

                            </div>
                            <div class="mt-2 text-center sm:mt-3">

                                <dl class="divide-y divide-gray-100">
                                    <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-xs font-medium text-gray-900">@context</dt>
                                        <dd class="mt-1 text-xs leading-6 text-gray-700 sm:col-span-2 sm:mt-0"
                                            x-text="'[ ' + credential?.context.join(', ') + ' ]'"></dd>
                                    </div>

                                    <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-xs font-medium text-gray-900">Type Credential</dt>
                                        <dd class="mt-1 text-xs leading-6 text-gray-700 sm:col-span-2 sm:mt-0"
                                            x-text="'[ ' + credential?.typeCredential.join(', ') + ' ]'"></dd>
                                    </div>

                                    <div class="px-1 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-xs font-medium text-gray-900">schema</dt>
                                        <dd class="mt-1 text-xs leading-6 text-gray-700 sm:col-span-2 sm:mt-0"
                                            x-text="'[ ' + credential?.credentialSchema.join(', ') + ' ]'"></dd>
                                    </div>

                                    <div class="px-1 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-xs font-medium text-gray-900">Issuer</dt>
                                        <dd class="mt-1 text-xs leading-6 text-gray-700 sm:col-span-2 sm:mt-0"
                                            x-text="credential?.issuer"></dd>
                                    </div>

                                    <div class="px-1 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-xs font-medium text-gray-900">Proof Purpose</dt>
                                        <dd class="mt-1 text-xs leading-6 text-gray-700 sm:col-span-2 sm:mt-0"
                                            x-text="credential?.proof?.proofPurpose"></dd>
                                    </div>

                                    <div class="px-1 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-xs font-medium text-gray-900">Type Signature</dt>
                                        <dd class="mt-1 text-xs leading-6 text-gray-700 sm:col-span-2 sm:mt-0"
                                            x-text="credential?.proof?.typeSignature"></dd>
                                    </div>

                                    <div class="px-1 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-xs font-medium text-gray-900">Signature</dt>
                                        <dd class="truncate text-ellipsis  mt-1 text-xs leading-6 text-gray-700 sm:col-span-2 sm:mt-0"
                                            x-text="credential?.signature"></dd>
                                    </div>

                                    <div class="px-1 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                        <dt class="text-xs font-medium text-gray-900">Verification Method</dt>
                                        <dd class="mt-1 text-xs leading-6 text-gray-700 sm:col-span-2 sm:mt-0"
                                            x-text="credential?.proof?.verificationMethod"></dd>
                                    </div>

                                    <div class="flex">

                                        <div class="pt-3" style="margin: 0 auto;" id="qr_code">

                                        </div>
                                    </div>



                                </dl>



                            </div>
                        </div>
                        <div class="mt-5 sm:mt-6 sm:grid sm:grid-flow-row-dense sm:grid-cols-2 sm:gap-3">
                            <button type="button"
                                class="inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 sm:col-start-2">Deactivate</button>
                            <button @click="showDetails = false" type="button"
                                class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:col-start-1 sm:mt-0">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end modal -->


        <div class="flex flex-col justify-center items-center" x-show="address !== ''">
            <svg width="80" height="80" x-bind:data-jdenticon-value="address"></svg>

            <div class="mt-4 flex">
                <p class="mr-3 text-sm text-gray-500" x-text="'did:eth:' + address"></p>
                <button @click="copyAddress" type="button"
                    class="rounded bg-indigo-600 px-2 py-1 text-xs font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Copiar</button>
            </div>



            <div class="mt-2 grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-4">
                <ul class="list-none">
                    <template x-for="(contract, index) in credentials" :key="index">
                        <li class="py-2">
                            <div class="flex items-center space-x-4">
                                <div class="flex-shrink-0">
                                    <img width="40" x-bind:src="getImageCredential(contract.issuer)" />
                                </div>
                                <div class="min-w-0 flex-1">
                                    <p class="truncate text-sm font-medium text-gray-700"
                                        x-text="getCredentialName(contract.issuer)"></p>



                                    <div class="flex min-w-0 flex-1 gap-2">
                                        <span class="truncate text-sm  text-gray-600 font-semibold">Issued:</span>
                                        <span class="flex-shrink-0 text-sm text-gray-400"
                                            x-text="parseDate(contract.issuanceDate * 1000)"></span>
                                    </div>

                                    <button @click="openExplorerIssuer(contract)" type="button"
                                        class="rounded bg-indigo-50 px-2 py-1 text-xs font-semibold text-indigo-600 shadow-sm hover:bg-indigo-100"
                                        x-text="'Issuer: ' + contract.issuer"></button>

                                    <p class="truncate text-ellipsis text-sm text-gray-500"
                                        x-text="buildExpires(contract)"></p>



                                </div>
                                <div>
                                    <button @click="() => {
                                        showDetails = true;
                                        credential = contract;
                                        generateQR({
                                            index,
                                            owner: address,
                                            contract: contract.issuer
                                        });
                                        getJSONCredential(index);
                                    }" type="button"
                                        class="rounded bg-white px-2 py-1 text-xs font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">Details</button>
                                </div>
                            </div>
                        </li>
                    </template>
                </ul>
            </div>



        </div>

        <div x-show="address === ''">
            <button x-on:click="startConnect"
                class="block mx-auto text-white bg-gradient-to-br from-pink-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-pink-200 dark:focus:ring-pink-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center mb-2">
                Connect Wallet</button>
        </div>



        <script>

            let Web3Modal = window.Web3Modal.default;
            let WalletConnectProvider = window.WalletConnectProvider.default;
            let Fortmatic = window.Fortmatic;
            let web3;
            let signer;

            const providerOptions = {
                walletconnect: {
                    package: WalletConnectProvider,
                    options: {
                        infuraId: '8043bb2cf99347b1bfadfb233c5325c0'
                    }
                },

                fortmatic: {
                    package: Fortmatic,
                    options: {
                        key: 'pk_test_391E26A3B43A3350'
                    }
                }
            };

            const web3Modal = new Web3Modal({
                cacheProvider: false,
                providerOptions
            });

            function openExplorerIssuer(credential) {
                window.open('https://polygonscan.com/address/' + credential.issuer);
            }

            function copyAddress() {
                navigator.clipboard.writeText(this.address);
            }

            function buildExpires(credential) {
                const number = credential.expirationDate.toNumber();
                if (number === 0) {
                    return 'Credential without expiration'
                }

                const date = new Date(contract.issuanceDate * 1000);
                const today = new Date();
                const diff = futureDate.getTime() - today.getTime();
                const daysLeft = Math.floor(diff / (1000 * 60 * 60 * 24));

                return `${daysLeft} days left to expire`;
            }

            async function startConnect() {
                try {
                    provider = await web3Modal.connect();
                    web3 = new ethers.providers.Web3Provider(provider);
                    signer = web3.getSigner();

                    //await createVC();
                    this.credentials = await getVC();
                    this.address = await signer.getAddress();


                    provider.on('accountsChanged', (accounts) => {
                        //fetchAccountData();
                    });

                    provider.on('chainChanged', (chainId) => {
                        console.log(chainId);
                        //fetchAccountData();
                    });

                    provider.on('networkChanged', (networkId) => {
                        console.log(networkId);
                        // fetchAccountData();
                    });

                } catch (e) {
                    console.log('Could not get a wallet connection', e);
                    return;
                }
            }

            function generateQR(item) {
                document.querySelector('#qr_code').innerHTML = "";
                QrCreator.render({
                    text: JSON.stringify(item),
                    radius: 0.5, // 0.0 to 0.5
                    ecLevel: 'H', // L, M, Q, H
                    fill: '#000000', // foreground color
                    background: null, // color or null for transparent
                    size: 128 // in pixels
                }, document.querySelector('#qr_code'));

            }

            async function createVC() {
                const VeriableItemNamed = 'VeriableItemNamed';

                const domain = {
                    name: 'NebuIADID',
                    version: '1',
                    chainId: 1,
                    verifyingContract: '0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC'
                };

                const types = {
                    VeriableItemNamed: [
                        { name: 'value_', type: 'string' },
                        { name: 'valid_', type: 'uint8' },
                    ],
                    IdOf: [
                        { name: 'id_', type: 'string' },
                        { name: 'email_', type: VeriableItemNamed },
                        { name: 'address_', type: VeriableItemNamed },
                        { name: 'phone_', type: VeriableItemNamed },
                        { name: 'document_', type: VeriableItemNamed },
                        { name: 'face_', type: VeriableItemNamed },
                    ]
                };

                const value = {
                    id_: 'id_sample',
                    email_: {
                        value_: 'miguel@distbit.io',
                        valid_: 1,
                    },
                    address_: {
                        value_: 'Chimalhuacan Edo Mex',
                        valid_: 1,
                    },
                    phone_: {
                        value_: '8129099148',
                        valid_: 1,
                    },
                    document_: {
                        value_: '32432423',
                        valid_: 1,
                    },
                    face_: {
                        value_: 'match and spoofing',
                        valid_: 1,
                    },
                };

                const signer = web3.getSigner();
                const addr = await signer.getAddress();

                const nebuia_contract = new ethers.Contract(nebuia_address, nebuia, signer);
                const vc_contract = new ethers.Contract(vc_address, vc, signer);
                const store_contract = new ethers.Contract(store_address, store, signer);

                const encode = await nebuia_contract.serializeIdOf(value);
                const signature = await signer._signTypedData(domain, types, value);

                let tx_vc = await vc_contract.createVC(nebuia_address, addr, encode, signature, 000000);
                console.log(tx_vc);

                // upload to ipfs
                const hash = uploadJSONtoIPFS({
                    domain, types, value
                });

                let tx_store = await store_contract.createHash(hash, addr, 0);
                console.log(tx_store);
            }

            async function getVC() {
                const vc_contract = new ethers.Contract(vc_address, vc, signer);
                return await vc_contract.getVCFromUser();
            }

            async function getImageCredential(contract) {
                const nebuia_contract = new ethers.Contract(contract, nebuia, signer);
                let img = await nebuia_contract.logo();
                return 'https://nebuia.infura-ipfs.io/ipfs/' + img;
            }

            async function getJSONCredential(index) {
                const store_contract = new ethers.Contract(store_address, store, signer);
                let hashed = await store_contract.getHash();
                console.log(hashed);
            }

            function getCredentialName(contract) {
                const nebuia_contract = new ethers.Contract(contract, nebuia, signer);
                return nebuia_contract.viewVersion();
            }

            function parseDate(quent) {
                const date = new Date(quent);
                const day = date.getDate().toString().padStart(2, '0');
                const month = (date.getMonth() + 1).toString().padStart(2, '0');
                const year = date.getFullYear();

                return `${day}/${month}/${year}`;
            }

            async function uploadJSONtoIPFS(jsonData) {
                try {
                    const formData = new FormData();
                    const jsonBlob = new Blob([JSON.stringify(jsonData)], { type: 'application/json' });
                    formData.append('file', jsonBlob, 'data.json');
                    var headers = new Headers();
                    headers.append("Authorization", "Basic MlBwdDZTcmlXSXM3U3dRZU9qVkJHdmZ6RXlUOjBhYWRlMWI1ODQ4ZjlhOGNiZTQ0MmUzNDA0NzBmNWM3");

                    const response = await fetch('https://ipfs.infura.io:5001/api/v0/add', {
                        method: 'POST',
                        body: formData,
                        headers,
                    });

                    if (!response.ok) {
                        throw new Error('Error al cargar el archivo JSON a IPFS.');
                    }

                    const jsonResponse = await response.json();
                    const ipfsHash = jsonResponse.Hash;
                    console.log('Archivo JSON cargado a IPFS con el hash:', ipfsHash);
                    return ipfsHash;
                } catch (error) {
                    console.error('Error:', error);
                }
            }


        </script>


    </div>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>


    <script>
        const vc_address = '0x8C0F9775CaaEBF515aFb941f3ae5c0cfA6CB91A0';
        const store_address = '0xa8CfE2e5FD7D4cDB9dD1498893dF52077bfDEB6D';
        const nebuia_address = '0xB650F001Be6292adB027679DFEE47C68C6Ecb6EA';

        const store = [
            {
                "inputs": [],
                "stateMutability": "nonpayable",
                "type": "constructor"
            },
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "_signature",
                        "type": "string"
                    },
                    {
                        "internalType": "address",
                        "name": "_to",
                        "type": "address"
                    },
                    {
                        "internalType": "uint256",
                        "name": "_index",
                        "type": "uint256"
                    }
                ],
                "name": "createHash",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "getHash",
                "outputs": [
                    {
                        "components": [
                            {
                                "internalType": "uint256",
                                "name": "index",
                                "type": "uint256"
                            },
                            {
                                "internalType": "bytes",
                                "name": "hash",
                                "type": "bytes"
                            }
                        ],
                        "internalType": "struct _Store.Hash[]",
                        "name": "",
                        "type": "tuple[]"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            }
        ];
        const vc = [
            {
                "inputs": [
                    {
                        "internalType": "uint256",
                        "name": "index_",
                        "type": "uint256"
                    }
                ],
                "name": "verifyByOwner",
                "outputs": [
                    {
                        "internalType": "bool",
                        "name": "",
                        "type": "bool"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "owner_",
                        "type": "address"
                    },
                    {
                        "internalType": "uint256",
                        "name": "index_",
                        "type": "uint256"
                    }
                ],
                "name": "verifyByIssuer",
                "outputs": [
                    {
                        "internalType": "bool",
                        "name": "",
                        "type": "bool"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "owner_",
                        "type": "address"
                    },
                    {
                        "internalType": "address",
                        "name": "issuer_",
                        "type": "address"
                    },
                    {
                        "internalType": "uint256",
                        "name": "index_",
                        "type": "uint256"
                    }
                ],
                "name": "revokeVC",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "service_",
                        "type": "address"
                    },
                    {
                        "internalType": "address",
                        "name": "to_",
                        "type": "address"
                    },
                    {
                        "internalType": "bytes",
                        "name": "identity_",
                        "type": "bytes"
                    },
                    {
                        "internalType": "bytes",
                        "name": "signature_",
                        "type": "bytes"
                    },
                    {
                        "internalType": "uint256",
                        "name": "expiration_",
                        "type": "uint256"
                    }
                ],
                "name": "createVC",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "getVCFromUser",
                "outputs": [
                    {
                        "components": [
                            {
                                "internalType": "string[]",
                                "name": "context",
                                "type": "string[]"
                            },
                            {
                                "internalType": "string[]",
                                "name": "typeCredential",
                                "type": "string[]"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "typeSignature",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "string",
                                        "name": "proofPurpose",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "string",
                                        "name": "verificationMethod",
                                        "type": "string"
                                    },
                                    {
                                        "components": [
                                            {
                                                "internalType": "string",
                                                "name": "name",
                                                "type": "string"
                                            },
                                            {
                                                "internalType": "string",
                                                "name": "version",
                                                "type": "string"
                                            },
                                            {
                                                "internalType": "uint256",
                                                "name": "chainId",
                                                "type": "uint256"
                                            },
                                            {
                                                "internalType": "address",
                                                "name": "verifyingContract",
                                                "type": "address"
                                            }
                                        ],
                                        "internalType": "struct IEIP721.EIP712Domain",
                                        "name": "domain",
                                        "type": "tuple"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "v",
                                        "type": "uint8"
                                    },
                                    {
                                        "internalType": "bytes32",
                                        "name": "r",
                                        "type": "bytes32"
                                    },
                                    {
                                        "internalType": "bytes32",
                                        "name": "s",
                                        "type": "bytes32"
                                    },
                                    {
                                        "internalType": "uint256",
                                        "name": "created",
                                        "type": "uint256"
                                    }
                                ],
                                "internalType": "struct NebuVC.Proof",
                                "name": "proof",
                                "type": "tuple"
                            },
                            {
                                "internalType": "address",
                                "name": "issuer",
                                "type": "address"
                            },
                            {
                                "internalType": "bytes",
                                "name": "signature",
                                "type": "bytes"
                            },
                            {
                                "internalType": "uint256",
                                "name": "issuanceDate",
                                "type": "uint256"
                            },
                            {
                                "internalType": "uint256",
                                "name": "expirationDate",
                                "type": "uint256"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "id",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "string",
                                        "name": "typeSchema",
                                        "type": "string"
                                    }
                                ],
                                "internalType": "struct IEIP721.Schema",
                                "name": "credentialSchema",
                                "type": "tuple"
                            }
                        ],
                        "internalType": "struct NebuVC.VerifiableCredential[]",
                        "name": "",
                        "type": "tuple[]"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "contract IEIP721",
                        "name": "vc_",
                        "type": "address"
                    }
                ],
                "name": "domain",
                "outputs": [
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "name",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "version",
                                "type": "string"
                            },
                            {
                                "internalType": "uint256",
                                "name": "chainId",
                                "type": "uint256"
                            },
                            {
                                "internalType": "address",
                                "name": "verifyingContract",
                                "type": "address"
                            }
                        ],
                        "internalType": "struct IEIP721.EIP712Domain",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "contract IEIP721",
                        "name": "vc_",
                        "type": "address"
                    }
                ],
                "name": "verificationMethod",
                "outputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "contract IEIP721",
                        "name": "vc_",
                        "type": "address"
                    }
                ],
                "name": "context",
                "outputs": [
                    {
                        "internalType": "string[]",
                        "name": "",
                        "type": "string[]"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "contract IEIP721",
                        "name": "vc_",
                        "type": "address"
                    }
                ],
                "name": "types",
                "outputs": [
                    {
                        "internalType": "string[]",
                        "name": "",
                        "type": "string[]"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "contract IEIP721",
                        "name": "vc_",
                        "type": "address"
                    }
                ],
                "name": "schema",
                "outputs": [
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "id",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "typeSchema",
                                "type": "string"
                            }
                        ],
                        "internalType": "struct IEIP721.Schema",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "contract IEIP721",
                        "name": "vc_",
                        "type": "address"
                    }
                ],
                "name": "owner",
                "outputs": [
                    {
                        "internalType": "address",
                        "name": "",
                        "type": "address"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            }
        ];
        const nebuia = [
            {
                "inputs": [
                    {
                        "internalType": "string",
                        "name": "issuer_",
                        "type": "string"
                    },
                    {
                        "internalType": "string[]",
                        "name": "context_",
                        "type": "string[]"
                    },
                    {
                        "internalType": "string",
                        "name": "id_",
                        "type": "string"
                    },
                    {
                        "internalType": "string[]",
                        "name": "type_",
                        "type": "string[]"
                    },
                    {
                        "internalType": "string",
                        "name": "verificationMethod_",
                        "type": "string"
                    },
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "id",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "typeSchema",
                                "type": "string"
                            }
                        ],
                        "internalType": "struct IEIP721.Schema",
                        "name": "schema_",
                        "type": "tuple"
                    },
                    {
                        "internalType": "string",
                        "name": "logo_",
                        "type": "string"
                    }
                ],
                "stateMutability": "nonpayable",
                "type": "constructor"
            },
            {
                "anonymous": false,
                "inputs": [
                    {
                        "indexed": true,
                        "internalType": "address",
                        "name": "previousOwner",
                        "type": "address"
                    },
                    {
                        "indexed": true,
                        "internalType": "address",
                        "name": "newOwner",
                        "type": "address"
                    }
                ],
                "name": "OwnershipTransferred",
                "type": "event"
            },
            {
                "inputs": [],
                "name": "context",
                "outputs": [
                    {
                        "internalType": "string[]",
                        "name": "",
                        "type": "string[]"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "bytes",
                        "name": "data_",
                        "type": "bytes"
                    }
                ],
                "name": "deserializeIdOf",
                "outputs": [
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "id_",
                                "type": "string"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "email_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "address_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "phone_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "document_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "face_",
                                "type": "tuple"
                            }
                        ],
                        "internalType": "struct _NebuIADID.IdOf",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "pure",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [],
                "name": "domain",
                "outputs": [
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "name",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "version",
                                "type": "string"
                            },
                            {
                                "internalType": "uint256",
                                "name": "chainId",
                                "type": "uint256"
                            },
                            {
                                "internalType": "address",
                                "name": "verifyingContract",
                                "type": "address"
                            }
                        ],
                        "internalType": "struct IEIP721.EIP712Domain",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [],
                "name": "id",
                "outputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [],
                "name": "issuer",
                "outputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [],
                "name": "logo",
                "outputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [],
                "name": "owner",
                "outputs": [
                    {
                        "internalType": "address",
                        "name": "",
                        "type": "address"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "id_",
                                "type": "string"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "email_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "address_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "phone_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "document_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "face_",
                                "type": "tuple"
                            }
                        ],
                        "internalType": "struct _NebuIADID.IdOf",
                        "name": "_idOf",
                        "type": "tuple"
                    },
                    {
                        "internalType": "bytes",
                        "name": "_signature",
                        "type": "bytes"
                    }
                ],
                "name": "recoverSigner",
                "outputs": [
                    {
                        "internalType": "address",
                        "name": "",
                        "type": "address"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "bytes",
                        "name": "data_",
                        "type": "bytes"
                    },
                    {
                        "internalType": "bytes",
                        "name": "signature_",
                        "type": "bytes"
                    }
                ],
                "name": "recoverSignerFromBytes",
                "outputs": [
                    {
                        "internalType": "address",
                        "name": "",
                        "type": "address"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [],
                "name": "renounceOwnership",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "schema",
                "outputs": [
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "id",
                                "type": "string"
                            },
                            {
                                "internalType": "string",
                                "name": "typeSchema",
                                "type": "string"
                            }
                        ],
                        "internalType": "struct IEIP721.Schema",
                        "name": "",
                        "type": "tuple"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "components": [
                            {
                                "internalType": "string",
                                "name": "id_",
                                "type": "string"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "email_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "address_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "phone_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "document_",
                                "type": "tuple"
                            },
                            {
                                "components": [
                                    {
                                        "internalType": "string",
                                        "name": "value_",
                                        "type": "string"
                                    },
                                    {
                                        "internalType": "uint8",
                                        "name": "valid_",
                                        "type": "uint8"
                                    }
                                ],
                                "internalType": "struct _NebuIADID.VeriableItemNamed",
                                "name": "face_",
                                "type": "tuple"
                            }
                        ],
                        "internalType": "struct _NebuIADID.IdOf",
                        "name": "id_",
                        "type": "tuple"
                    }
                ],
                "name": "serializeIdOf",
                "outputs": [
                    {
                        "internalType": "bytes",
                        "name": "",
                        "type": "bytes"
                    }
                ],
                "stateMutability": "pure",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "bytes",
                        "name": "signature_",
                        "type": "bytes"
                    }
                ],
                "name": "splitSignatureFromBytes",
                "outputs": [
                    {
                        "internalType": "uint8",
                        "name": "",
                        "type": "uint8"
                    },
                    {
                        "internalType": "bytes32",
                        "name": "",
                        "type": "bytes32"
                    },
                    {
                        "internalType": "bytes32",
                        "name": "",
                        "type": "bytes32"
                    }
                ],
                "stateMutability": "pure",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [
                    {
                        "internalType": "address",
                        "name": "newOwner",
                        "type": "address"
                    }
                ],
                "name": "transferOwnership",
                "outputs": [],
                "stateMutability": "nonpayable",
                "type": "function"
            },
            {
                "inputs": [],
                "name": "typeCredential",
                "outputs": [
                    {
                        "internalType": "string[]",
                        "name": "",
                        "type": "string[]"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [],
                "name": "verificationMethod",
                "outputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            },
            {
                "inputs": [],
                "name": "viewVersion",
                "outputs": [
                    {
                        "internalType": "string",
                        "name": "",
                        "type": "string"
                    }
                ],
                "stateMutability": "view",
                "type": "function",
                "constant": true
            }
        ];
    </script>

</body>

</html>